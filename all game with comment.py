import random
from dataclasses import dataclass
from typing import List, Dict


# –ö–ª–∞—Å—Å Artifact –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –≤ –∏–≥—Ä–µ
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä @dataclass –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
@dataclass
class Artifact:
    name: str  # –ù–∞–∑–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
    emoji: str  # –≠–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    description: str  # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
    power: int = 0  # –°–∏–ª–∞/—Ü–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
    special_for_exam: bool = False  # –§–ª–∞–≥, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–µ–¥–º–µ—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–º –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞

    def __str__(self):
        # –ú–µ—Ç–æ–¥ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
        return f"{self.emoji} {self.name}"


# –ö–ª–∞—Å—Å Location –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–≤—ã–µ –ª–æ–∫–∞—Ü–∏–∏
class Location:
    def __init__(self, name: str, description: str, emoji: str = ""):
        self.name = name  # –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
        self.description = description  # –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
        self.emoji = emoji  # –≠–º–æ–¥–∑–∏ –¥–ª—è –ª–æ–∫–∞—Ü–∏–∏
        self.visited = False  # –§–ª–∞–≥ –ø–æ—Å–µ—â–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏
        self.choices: Dict[str, str] = {}  # –°–ª–æ–≤–∞—Ä—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã–±–æ—Ä–∞ –≤ –ª–æ–∫–∞—Ü–∏–∏
        self.artifacts: List[Artifact] = []  # –°–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –ª–æ–∫–∞—Ü–∏–∏

    def visit(self):
        # –ü–æ–º–µ—á–∞–µ—Ç –ª–æ–∫–∞—Ü–∏—é –∫–∞–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—É—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
        self.visited = True
        return f"{self.emoji}{self.description}{self.emoji}"


# –ö–ª–∞—Å—Å Student —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –¥—Ä—É–≥–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö –∏ –µ–¥–µ –≤ —Å—Ç–æ–ª–æ–≤–æ–π
class Student:
    def __init__(self):
        # –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –∏–≥—Ä—ã "–∫–∞–º–µ–Ω—å-–Ω–æ–∂–Ω–∏—Ü—ã-–±—É–º–∞–≥–∞"
        self.choices = ["–∫–∞–º–µ–Ω—å", "–Ω–æ–∂–Ω–∏—Ü—ã", "–±—É–º–∞–≥–∞"]
        
        # –°–ø–∏—Å–æ–∫ –±–ª—é–¥ –≤ —Å—Ç–æ–ª–æ–≤–æ–π (–∫–∞–∂–¥–æ–µ –±–ª—é–¥–æ - –∞—Ä—Ç–µ—Ñ–∞–∫—Ç)
        self.food_items = [
            Artifact("–ü–∏—Ä–æ–∂–æ–∫", "", "–í–∫—É—Å–Ω—ã–π –ø–∏—Ä–æ–∂–æ–∫ –¥–ª—è –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å–∏–ª", 20),
            Artifact("–ë–æ—Ä—â", "", "–ù–∞–≤–∞—Ä–∏—Å—Ç—ã–π –±–æ—Ä—â —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π", 25),
            Artifact("–ö–æ—Ç–ª–µ—Ç–∞ —Å –ø—é—Ä–µ", "", "–ö–ª–∞—Å—Å–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–π —Å—Ç–æ–ª–æ–≤–æ–π", 30),
            Artifact("–ö–æ–º–ø–æ—Ç", "", "–û—Å–≤–µ–∂–∞—é—â–∏–π —è–≥–æ–¥–Ω—ã–π –∫–æ–º–ø–æ—Ç", 15),
            Artifact("–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å", "", "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç", 10),
            Artifact("–ß–∞–π", "", "–°–ª–∞–¥–∫–∏–π —á–∞–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã", 5)
        ]


# –ö–ª–∞—Å—Å Player –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –∏ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
class Player:
    def __init__(self):
        self.artifacts: List[Artifact] = []  # –°–ø–∏—Å–æ–∫ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
        self.visited_locations: List[str] = []  # –°–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
        self.has_pen = False  # –§–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è —Ä—É—á–∫–∏ (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        self.prepared_tickets = []  # –°–ø–∏—Å–æ–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤
        self.special_artifacts_found = 0  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    
    def add_artifact(self, artifact: Artifact):
        # –î–æ–±–∞–≤–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é –∏–≥—Ä–æ–∫–∞
        self.artifacts.append(artifact)
        # –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –æ—Å–æ–±—ã–π, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
        if artifact.special_for_exam:
            self.special_artifacts_found += 1

    def get_artifact_names(self) -> str:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤—Å–µ—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
        if not self.artifacts:
            return "–ù–∏—á–µ–≥–æ"
        return ", ".join(str(artifact) for artifact in self.artifacts)

    def special_artifact(self, artifact_name: str) -> bool:
        # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –∏–≥—Ä–æ–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
        return any(artifact.name == artifact_name for artifact in self.artifacts)


# –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤—Å–µ–π –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
class AdventureGame:
    def __init__(self):
        self.player = Player()  # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
        self.game_active = True  # –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã
        self.locations = self.static()  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ª–æ–∫–∞—Ü–∏–∏
        self.student = Student()  # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
        
        # –°–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
        self.classrooms = ["501", "502", "503", "504", "505", "506"]
        # –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º —Ü–µ–ª–µ–≤–æ–π –∫–∞–±–∏–Ω–µ—Ç
        self.target_classroom = random.choice(self.classrooms)
        # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ —É–≥–∞–¥–∞—Ç—å –∫–∞–±–∏–Ω–µ—Ç
        self.teacher_attempts = 3

        # –û—Å–æ–±—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞ (–∏–º–µ—é—Ç special_for_exam=True)
        self.exam_special_artifacts = [
            Artifact("–®–ø–∞—Ä–≥–∞–ª–∫–∞", "üìù", "–°–µ–∫—Ä–µ—Ç —É—Å–ø–µ—Ö–∞ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ", 50, True),
            Artifact("–ö–æ–Ω—Å–ø–µ–∫—Ç", "üìí", "–í—Å–µ —Ñ–æ—Ä–º—É–ª—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ", 45, True),
            Artifact("–£—á–µ–±–Ω–∏–∫", "üìö", "–í—Å—è —Ç–µ–æ—Ä–∏—è –≤ –æ–¥–Ω–æ–π –∫–Ω–∏–≥–µ", 60, True),
            Artifact("–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä", "üßÆ", "–†–µ—à–∞–µ—Ç –ª—é–±—ã–µ –ø—Ä–µ–¥–µ–ª—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª—ã", 55, True),
        ]
        
        # –û–±—ã—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ
        self.hallway_artifacts = [
            Artifact("–ó–∞–±—ã—Ç–∞—è —Ç–µ—Ç—Ä–∞–¥—å", "üìì", "–ß—å–∏-—Ç–æ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã", 15, False),
        ]

        # –°–ø–∏—Å–æ–∫ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω (–Ω–æ–º–µ—Ä–∞ –æ—Ç 1 –¥–æ 10)
        self.exam_tickets = list(range(1, 11))
        # –ò–≥—Ä–æ–∫ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ 3 —Å–ª—É—á–∞–π–Ω—ã–º –±–∏–ª–µ—Ç–∞–º
        self.player.prepared_tickets = random.sample(self.exam_tickets, 3)
        
        # –°–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ (1 –∏–ª–∏ 2)
        self.special_in_hallway = random.randint(1, 2)

    def static(self) -> Dict[str, Location]:
        # –°–æ–∑–¥–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤—Å–µ—Ö –∏–≥—Ä–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏–π
        locations = {
            "start": Location(
                "–ù–∞—á–∞–ª–æ",
                "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫—É—é –∂–∏–∑–Ω—å! –°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç —ç–∫–∑–∞–º–µ–Ω –ø–æ –º–∞—Ç–∞–Ω—É",
                "üíÄ"
            ),
            "hallway": Location(
                "–ö–æ—Ä–∏–¥–æ—Ä –ú–ê–ò",
                "–í—ã —Å—Ç–æ–∏—Ç–µ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ –ú–ê–ò, –∞ –¥–æ —ç–∫–∑–∞–º–µ–Ω–∞ –æ—Å—Ç–∞–ª–æ—Å—å –ø–æ–ª—á–∞—Å–∞. –ö—É–¥–∞ –≤—ã –ø–æ–π–¥–µ—Ç–µ?",
                ""
            ),
            "cafeteria": Location(
                "–°—Ç–æ–ª–æ–≤–∞—è",
                "–í—ã –∑–∞—à–ª–∏ –≤ —Å—Ç–æ–ª–æ–≤—É—é, –≥–¥–µ —É–≤–∏–¥–µ–ª–∏ –æ–≥—Ä–æ–º–Ω—É—é –æ—á–µ—Ä–µ–¥—å –∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.",
                ""
            ),
            "student_game": Location(
                "–ò–≥—Ä–∞ —Å –≥–æ–ª–æ–¥–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏",
                "–ò–≥—Ä–∞ —Å –≥–æ–ª–æ–¥–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏. –ü–æ–±–µ–¥–∏—Ç–µ —Ç—Ä–æ–∏—Ö –∏–∑ –Ω–∏—Ö ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –µ–¥—É, –ø—Ä–æ–∏–≥—Ä–∞–µ—Ç–µ ‚Äî –ø—Ä–∏–¥–µ—Ç—Å—è –æ—Ç—Å—Ç–æ—è—Ç—å –æ—á–µ—Ä–µ–¥—å –∏ –æ–ø–æ–∑–¥–∞—Ç—å –Ω–∞ —ç–∫–∑–∞–º–µ–Ω.",
                ""
            ),
            "teacher_quest": Location(
                "–ó–∞–¥–∞–Ω–∏–µ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞",
                "–í—ã –≤—ã—Ö–æ–¥–∏—Ç–µ –∏–∑ —Å—Ç–æ–ª–æ–≤–æ–π –∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.",
                ""
            ),
            "exam_preparation": Location(
                "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É",
                "–í—ã –ø—Ä–∏—à–ª–∏ –≤ –∞—É–¥–∏—Ç–æ—Ä–∏—é –∑–∞—Ä–∞–Ω–µ–µ –∏ –≥–æ—Ç–æ–≤–∏—Ç–µ—Å—å –∫ —ç–∫–∑–∞–º–µ–Ω—É.",
                "üìö"
            )
        }

        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã–±–æ—Ä–∞ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ
        locations["hallway"].choices = {
            "–Ω–∞–ª–µ–≤–æ": "–í—ã –∏–¥–µ—Ç–µ –Ω–∞–ª–µ–≤–æ –∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –≤ —Å—Ç–æ–ª–æ–≤—É—é, –≥–¥–µ —Å—Ç–æ–∏—Ç —Ü–µ–ª–∞—è –æ—á–µ—Ä–µ–¥—å –∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤",
            "–Ω–∞–ø—Ä–∞–≤–æ": "–í—ã –∏–¥–µ—Ç–µ –Ω–∞–ø—Ä–∞–≤–æ –∏ –≤–∏–¥–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç—É—é –¥–≤–µ—Ä—å –≤ –∞—É–¥–∏—Ç–æ—Ä–∏—é"
        }

        return locations

    def start(self):
        # –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≤—ã–¥–∞—á–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
        print("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫—É—é –∂–∏–∑–Ω—å! –°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç —ç–∫–∑–∞–º–µ–Ω –ø–æ –º–∞—Ç–∞–Ω—É üíÄ")

        # –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç - —Ä—É—á–∫—É
        pen = Artifact("–†—É—á–∫–∞", "‚úçÔ∏è", "–°–∞–º–∞—è –±–∞–∑–∞ –¥–ª—è –ª—é–±–æ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞", 5)
        self.player.add_artifact(pen)
        print(f"–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: {pen} ‚Äî '{pen.description}'")
        
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–∏—Å–∫—É –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ
        self.search_hallway()

    def search_hallway(self):
        # –ü–æ–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã
        print("\nüîç –ü–æ–∫–∞ –≤—ã —Å—Ç–æ–∏—Ç–µ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ, —Ä–µ—à–∞–µ—Ç–µ –æ—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è,—á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–æ–ª–µ–∑–Ω—ã–µ –≤–µ—â–∏ –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º...")
        found_artifacts = []

        # –ù–∞—Ö–æ–¥–∏–º —Å–ª—É—á–∞–π–Ω—ã–µ –æ—Å–æ–±—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–æ—Ç 1 –¥–æ 2 —à—Ç—É–∫)
        special_to_find = random.sample(self.exam_special_artifacts, self.special_in_hallway)
        for artifact in special_to_find:
            found_artifacts.append(artifact)
            self.player.add_artifact(artifact)
            print(f"‚ú® –í—ã –Ω–∞—à–ª–∏: {artifact}! {artifact.description}")

        # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (0 –∏–ª–∏ 1 —à—Ç—É–∫–∞)
        normal_count = random.randint(0, 1)
        if normal_count > 0:
            normal_to_find = random.sample(self.hallway_artifacts, normal_count)
            for artifact in normal_to_find:
                found_artifacts.append(artifact)
                self.player.add_artifact(artifact)
                print(f" –í—ã –Ω–∞—à–ª–∏: {artifact}")

        # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞
        if not found_artifacts:
            print("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏. –ö–æ—Ä–∏–¥–æ—Ä –ø—É—Å—Ç.")
        else:
            print(f"üéí –¢–µ–ø–µ—Ä—å —É –≤–∞—Å {len(found_artifacts)} –ø—Ä–µ–¥–º–µ—Ç–æ–≤!")
        
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–∏–¥–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏
        self.hallway()

    def hallway(self):
        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è - –∫–æ—Ä–∏–¥–æ—Ä, –≥–¥–µ –∏–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        loc = self.locations["hallway"]
        print(f"\n{loc.visit()}")
        self.player.visited_locations.append(loc.name)

        # –¶–∏–∫–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
        while True:
            choice = input("–í–≤–µ–¥–∏—Ç–µ '–Ω–∞–ª–µ–≤–æ' –∏–ª–∏ '–Ω–∞–ø—Ä–∞–≤–æ': ").lower().strip()

            if choice == "–Ω–∞–ª–µ–≤–æ":
                # –ò–¥–µ–º –≤ —Å—Ç–æ–ª–æ–≤—É—é (–ª–µ–≤–∞—è –≤–µ—Ç–∫–∞ —Å—é–∂–µ—Ç–∞)
                self.cafeteria()
                break
            elif choice == "–Ω–∞–ø—Ä–∞–≤–æ":
                # –ò–¥–µ–º –ø—Ä—è–º–æ –≤ –∞—É–¥–∏—Ç–æ—Ä–∏—é (–ø—Ä–∞–≤–∞—è –≤–µ—Ç–∫–∞ —Å—é–∂–µ—Ç–∞)
                self.exam_preparation()
                break
            else:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '–Ω–∞–ª–µ–≤–æ' –∏–ª–∏ '–Ω–∞–ø—Ä–∞–≤–æ'")

    def exam_preparation(self):
        # –õ–æ–∫–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω—É (–ø—Ä–∞–≤–∞—è –≤–µ—Ç–∫–∞)
        loc = self.locations["exam_preparation"]
        print(f"\n{loc.visit()}")
        self.player.visited_locations.append("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É")

        print("\nüìñ –í—ã –∑–∞—à–ª–∏ –≤ –∞—É–¥–∏—Ç–æ—Ä–∏—é. –î–æ —ç–∫–∑–∞–º–µ–Ω–∞ –µ—â–µ 30 –º–∏–Ω—É—Ç.")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç –±–æ–Ω—É—Å—ã
        extra_tickets = 0
        if self.player.special_artifact("–ö–æ–Ω—Å–ø–µ–∫—Ç –º–µ—á—Ç—ã"):
            print("üìí –ö–æ–Ω—Å–ø–µ–∫—Ç –º–µ—á—Ç—ã –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ —É—Å–≤–∞–∏–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª!")
            extra_tickets += 1
        if self.player.special_artifact("–£—á–µ–±–Ω–∏–∫ –≥–µ–Ω–∏—è"):
            print("üìö –£—á–µ–±–Ω–∏–∫ –≥–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã!")
            extra_tickets += 1

        # –ï—Å–ª–∏ –µ—Å—Ç—å –±–æ–Ω—É—Å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã
        if extra_tickets > 0:
            # –ù–∞—Ö–æ–¥–∏–º –±–∏–ª–µ—Ç—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –∏–≥—Ä–æ–∫ –µ—â–µ –Ω–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª—Å—è
            remaining_tickets = [t for t in self.exam_tickets if t not in self.player.prepared_tickets]
            if remaining_tickets:
                # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –±–æ–Ω—É—Å—É
                additional = min(extra_tickets, len(remaining_tickets))
                additional_tickets = random.sample(remaining_tickets, additional)
                self.player.prepared_tickets.extend(additional_tickets)
                print(f"üéØ –ë–ª–∞–≥–æ–¥–∞—Ä—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º –≤—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏—Å—å –∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º {additional} –±–∏–ª–µ—Ç–∞–º!")

        # –í—ã–≤–æ–¥–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
        print(f"üìä –í—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏—Å—å –∫ {len(self.player.prepared_tickets)} –±–∏–ª–µ—Ç–∞–º –∏–∑ 10.")
        print(f"üìã –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã: {', '.join(map(str, sorted(self.player.prepared_tickets)))}")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —à–ø–∞—Ä–≥–∞–ª–∫–∏
        if self.player.special_artifact("–®–ø–∞—Ä–≥–∞–ª–∫–∞"):
            print("üìù –£ –≤–∞—Å –µ—Å—Ç—å —à–ø–∞—Ä–≥–∞–ª–∫–∞! –û–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –ø—Ä–∏ —Å–ø–∏—Å—ã–≤–∞–Ω–∏–∏.")

        print("\n‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ! –ó–∞—Ö–æ–¥–∏—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏ –≤—ã–∫–ª–∞–¥—ã–≤–∞–µ—Ç –±–∏–ª–µ—Ç—ã...")
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –Ω–∞—á–∞–ª—É —ç–∫–∑–∞–º–µ–Ω–∞
        self.exam_begin()

    def exam_begin(self):
        # –ù–∞—á–∞–ª–æ —ç–∫–∑–∞–º–µ–Ω–∞
        print("\n –ò—Ä–∏–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞: '–ü–æ–¥—Ö–æ–¥–∏—Ç–µ, —Ç—è–Ω–∏—Ç–µ –±–∏–ª–µ—Ç—ã!'")
        print("–í—ã —Ç—è–Ω–µ—Ç–µ –±–∏–ª–µ—Ç...")

        # –í—ã—Ç—è–≥–∏–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –±–∏–ª–µ—Ç
        drawn_ticket = random.choice(self.exam_tickets)
        print(f"üé´ –í—ã –≤—ã—Ç—è–Ω—É–ª–∏ –±–∏–ª–µ—Ç ‚Ññ{drawn_ticket}")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –ª–∏ –∏–≥—Ä–æ–∫ –∫ —ç—Ç–æ–º—É –±–∏–ª–µ—Ç—É
        if drawn_ticket in self.player.prepared_tickets:
            print("üéâ –£–†–ê! –í—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏—Å—å –∏–º–µ–Ω–Ω–æ –∫ —ç—Ç–æ–º—É –±–∏–ª–µ—Ç—É!")

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –¥–ª—è –±–æ–Ω—É—Å–∞
            bonus = 0
            if self.player.special_artifact("–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"):
                print("üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–æ–ª—à–µ–±–Ω—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Ä–µ—à–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏!")
                bonus = 0.2  # 20% –±–æ–Ω—É—Å –∫ —à–∞–Ω—Å—É —Ö–æ—Ä–æ—à–æ –æ—Ç–≤–µ—Ç–∏—Ç—å

            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–≤–µ—Ç–∞ (—Å —É—á–µ—Ç–æ–º –±–æ–Ω—É—Å–∞)
            if random.random() < (0.7 + bonus):
                print("–í—ã —Ö–æ—Ä–æ—à–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ü–µ–Ω–∫—É 4!")
                reward = Artifact("–ó–∞—á–µ—Ç–∫–∞ —Å —á–µ—Ç–≤–µ—Ä–∫–æ–π", "", "–í—ã —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –Ω–∞ 4", 40)
            else:
                print("–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ —Å—Ä–µ–¥–Ω–µ, –Ω–æ —Å–¥–∞–ª–∏. –û—Ü–µ–Ω–∫–∞ 3.")
                reward = Artifact("–ó–∞—á–µ—Ç–∫–∞ —Å —Ç—Ä–æ–π–∫–æ–π", "", "–í—ã —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –Ω–∞ 3", 30)

            self.player.add_artifact(reward)
            self.exam_success()  # –£—Å–ø–µ—à–Ω–∞—è —Å–¥–∞—á–∞
        else:
            # –ò–≥—Ä–æ–∫ –Ω–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –±–∏–ª–µ—Ç—É - –Ω—É–∂–Ω–æ —Å–ø–∏—Å—ã–≤–∞—Ç—å
            print("üíÄ –í—ã –Ω–µ –≥–æ—Ç–æ–≤—ã –∫ —ç—Ç–æ–º—É –±–∏–ª–µ—Ç—É! –£–¥–∞—á–∏!!!")
            print("–ù—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ —á—Ç–æ-—Ç–æ –ø—Ä–∏–¥—É–º–∞—Ç—å...")
            self.cheat_choice()  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É —Å–ø–æ—Å–æ–±–∞ —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è

    def cheat_choice(self):
        # –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ
        print("\n–í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π:")
        print("1. –°–ø–∏—Å–∞—Ç—å —Å –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ (—Ä–∏—Å–∫ –±—ã—Ç—å –∑–∞–º–µ—á–µ–Ω–Ω—ã–º)")
        print("2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ (—Å–∞–º—ã–π –æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–±)")
        print("3. –ü–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–º–æ—â—å —É –æ—Ç–ª–∏—á–Ω–∏—Ü—ã –ê–ª–∏–Ω—ã")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –∏–≥—Ä–æ–∫–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞
        has_excellent_cheat_sheet = self.player.special_artifact("–®–ø–∞—Ä–≥–∞–ª–∫–∞")

        # –ï—Å–ª–∏ –µ—Å—Ç—å —à–ø–∞—Ä–≥–∞–ª–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
        if has_excellent_cheat_sheet:
            print("4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–ø–∞—Ä–≥–∞–ª–∫—É(–º–µ–Ω—å—à–µ —à–∞–Ω—Å –±—ã—Ç—å –∑–∞–º–µ—á–µ–Ω–Ω—ã–º)")

        # –¶–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
        while True:
            try:
                choice_input = input("\n–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç: ").strip()
                choice = int(choice_input) if choice_input.isdigit() else 0

                # –í—ã–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞
                if choice == 1:
                    self.cheat_with_notes()
                    break
                elif choice == 2:
                    self.cheat_with_phone()
                    break
                elif choice == 3:
                    self.ask_alina()
                    break
                elif choice == 4 and has_excellent_cheat_sheet:
                    self.cheat_with_excellent_sheet()
                    break
                else:
                    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É —Å –¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
                    valid_options = "1-3" if not has_excellent_cheat_sheet else "1-4"
                    print(f"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ {valid_options}")
            except ValueError:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ")

    def cheat_with_excellent_sheet(self):
        # –°–ø–æ—Å–æ–± —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–ø–∞—Ä–≥–∞–ª–∫–∏ (—Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π)
        print("\nüìñ –í—ã –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –¥–æ—Å—Ç–∞–µ—Ç–µ —à–ø–∞—Ä–≥–∞–ª–∫—É...")

        # 20% —à–∞–Ω—Å –±—ã—Ç—å –ø–æ–π–º–∞–Ω–Ω—ã–º
        if random.random() < 0.2:
            print("–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å! '–°–¥–∞–≤–∞–π—Ç–µ –∑–∞—á–µ—Ç–∫—É!'")
            print("üíÄ –í–∞—Å –ø–æ–π–º–∞–ª–∏ –Ω–∞ —Å–ø–∏—Å—ã–≤–∞–Ω–∏–∏. –≠–∫–∑–∞–º–µ–Ω –Ω–µ —Å–¥–∞–Ω. –í–∞—Å –æ—Ç—á–∏—Å–ª—è—Ç")
            self.exam_failure()  # –ü—Ä–æ–≤–∞–ª —ç–∫–∑–∞–º–µ–Ω–∞
        else:
            print("‚úÖ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–¥–µ–∞–ª—å–Ω–∞! –í—ã —Å–ø–∏—Å–∞–ª–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ!")
            print("üéì –í—ã –æ—Ç–ª–∏—á–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ü–µ–Ω–∫—É 5!")
            reward = Artifact("–ó–∞—á–µ—Ç–∫–∞ —Å –ø—è—Ç–µ—Ä–∫–æ–π", "", "–í—ã —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –Ω–∞ 5 —Å–æ —à–ø–∞—Ä–≥–∞–ª–∫–æ–π", 50)
            self.player.add_artifact(reward)
            self.exam_success()  # –£—Å–ø–µ—à–Ω–∞—è —Å–¥–∞—á–∞ —Å –æ—Ç–ª–∏—á–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π

    def cheat_with_notes(self):
        # –°–ø–æ—Å–æ–± —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤
        print("\nüìù –í—ã –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –¥–æ—Å—Ç–∞–µ—Ç–µ —à–ø–∞—Ä–≥–∞–ª–∫—É...")

        # 40% —à–∞–Ω—Å –±—ã—Ç—å –ø–æ–π–º–∞–Ω–Ω—ã–º
        if random.random() < 0.4:
            print("–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å! '–°–¥–∞–≤–∞–π—Ç–µ –∑–∞—á–µ—Ç–∫—É!'")
            print("üíÄ –í–∞—Å –ø–æ–π–º–∞–ª–∏ –Ω–∞ —Å–ø–∏—Å—ã–≤–∞–Ω–∏–∏. –≠–∫–∑–∞–º–µ–Ω –Ω–µ —Å–¥–∞–Ω.")
            self.exam_failure()
        else:
            print("‚úÖ –í–∞–º —É–¥–∞–ª–æ—Å—å —Å–ø–∏—Å–∞—Ç—å –Ω–µ–∑–∞–º–µ—Ç–Ω–æ!")
            print("üéì –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ü–µ–Ω–∫—É 4!")
            reward = Artifact("–ó–∞—á–µ—Ç–∫–∞ —Å —á–µ—Ç–≤–µ—Ä–∫–æ–π (—Å–æ —Å–ø–∏—Å—ã–≤–∞–Ω–∏–µ–º)", "", "–í—ã —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –Ω–∞ 4, —Å–ø–∏—Å–∞–≤", 35)
            self.player.add_artifact(reward)
            self.exam_success()

    def cheat_with_phone(self):
        # –°–ø–æ—Å–æ–± —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å–∞–º—ã–π –æ–ø–∞—Å–Ω—ã–π)
        print("\n –í—ã —Ç–∏—Ö–æ–Ω—å–∫–æ –¥–æ—Å—Ç–∞–µ—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω...")

        # 60% —à–∞–Ω—Å –±—ã—Ç—å –ø–æ–π–º–∞–Ω–Ω—ã–º
        if random.random() < 0.6:
            print("–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª —Å–≤–µ—Ç —ç–∫—Ä–∞–Ω–∞! '–ß—Ç–æ —ç—Ç–æ —É –≤–∞—Å —Ç–∞–º —Å–≤–µ—Ç–∏—Ç—Å—è?'")
            print("–í–∞—Å –ø–æ–π–º–∞–ª–∏ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º. –≠–∫–∑–∞–º–µ–Ω –Ω–µ —Å–¥–∞–Ω. –í–∞—Å –æ—Ç—á–∏—Å–ª—è—Ç.")
            self.exam_failure()
        else:
            print("‚úÖ –í–∞–º —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –æ—Ç–≤–µ—Ç –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ!")
            print("üéì –í—ã —Ö–æ—Ä–æ—à–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—Ü–µ–Ω–∫—É 4!")
            reward = Artifact("–ó–∞—á–µ—Ç–∫–∞ —Å —á–µ—Ç–≤–µ—Ä–∫–æ–π (—Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º)", "üìó", "–í—ã —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –Ω–∞ 4 —Å –ø–æ–º–æ—â—å—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞", 35)
            self.player.add_artifact(reward)
            self.exam_success()

    def ask_alina(self):
        # –°–ø–æ—Å–æ–± —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è: –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–º–æ—â–∏ —É –æ—Ç–ª–∏—á–Ω–∏—Ü—ã (–≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–∞–ª—å–Ω—ã–π)
        print("\nüë©‚Äçüéì –í—ã —à–µ–ø–æ—Ç–æ–º –ø—Ä–æ—Å–∏—Ç–µ –ø–æ–º–æ—â–∏ —É –æ—Ç–ª–∏—á–Ω–∏—Ü—ã –ê–ª–∏–Ω—ã...")
        print("–ê–ª–∏–Ω–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ –ì–†–û–ú–ö–û –≥–æ–≤–æ—Ä–∏—Ç:")
        print("'–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä, –æ–Ω –ø—Ä–æ—Å–∏—Ç –º–µ–Ω—è –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å!'")
        print("–ê–ª–∏–Ω–∞ —Å–¥–∞–ª–∞ –≤–∞—Å! –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Ä–∞–∑–æ–∑–ª–∏–ª—Å—è.")
        print("‚ùå –≠–∫–∑–∞–º–µ–Ω –Ω–µ —Å–¥–∞–Ω.")
        self.exam_failure()  # –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–∞–ª

    def exam_success(self):
        # –ú–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ø–µ—à–Ω–æ–π —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞
        print("\nüéâ –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! –í—ã —É—Å–ø–µ—à–Ω–æ —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω –ø–æ –º–∞—Ç–∞–Ω—É!")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–±—Ä–∞–ª –ª–∏ –∏–≥—Ä–æ–∫ –º–Ω–æ–≥–æ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
        special_count = self.player.special_artifacts_found
        if special_count >= 2:
            print("üèÜ –í—ã —Å–æ–±—Ä–∞–ª–∏ –º–Ω–æ–≥–æ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤! –ü–æ–ª—É—á–∞–µ—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É!")
            bonus = Artifact("–î–∏–ø–ª–æ–º —Å –æ—Ç–ª–∏—á–∏–µ–º", "üéì", "–í—ã –ø–æ–∫–∞–∑–∞–ª–∏ –≤—ã–¥–∞—é—â–∏–µ—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã", 100)
            self.player.add_artifact(bonus)

        print("–í–∞—Å –Ω–µ –æ—Ç—á–∏—Å–ª–∏–ª–∏! –ú–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –æ—Ç–¥—ã—Ö–∞—Ç—å –Ω–∞ –∫–∞–Ω–∏–∫—É–ª–∞—Ö.")
        self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É

    def exam_failure(self):
        # –ú–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≤–∞–ª–∞ —ç–∫–∑–∞–º–µ–Ω–∞
        print("\nüíÄ –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–µ —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω.")
        print("–í–∞—Å –æ—Ç—á–∏—Å–ª–∏–ª–∏ –∏–∑ –ú–ê–ò.")
        self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É

    def cafeteria(self):
        # –õ–æ–∫–∞—Ü–∏—è —Å—Ç–æ–ª–æ–≤–æ–π (–ª–µ–≤–∞—è –≤–µ—Ç–∫–∞ —Å—é–∂–µ—Ç–∞)
        loc = self.locations["cafeteria"]
        print(f"\n{loc.visit()}")
        self.player.visited_locations.append("–°—Ç–æ–ª–æ–≤–∞—è")

        # –ò–≥—Ä–æ–∫ —Ä–µ—à–∞–µ—Ç, –ø—ã—Ç–∞—Ç—å—Å—è –ª–∏ –æ–±–æ–≥–Ω–∞—Ç—å –æ—á–µ—Ä–µ–¥—å
        while True:
            choice = input(
                "–ß—Ç–æ–±—ã —É—Å–ø–µ—Ç—å –Ω–∞ —ç–∫–∑–∞–º–µ–Ω, –Ω—É–∂–Ω–æ –æ–±–æ–≥–Ω–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –≤—ã–∑–æ–≤? (–¥–∞/–Ω–µ—Ç): ").lower().strip()

            if choice == "–¥–∞":
                print("\n–ß—Ç–æ–±—ã –≤–∞—Å –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –∫ –ø–æ–≤–∞—Ä–∏—Ö–µ, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±—ã–≥—Ä–∞—Ç—å –¥—Ä—É–≥–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.")
                self.student_game()  # –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
                break
            elif choice == "–Ω–µ—Ç":
                print("\n–í—ã –≤—Å—Ç–∞–ª–∏ –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏ –∏ –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω. –í–∞—Å –æ—Ç—á–∏—Å–ª–∏–ª–∏ –∏–∑-–∑–∞ –º–∞—Ç–∞–Ω–∞. üíÄ")
                self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É
                break
            else:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '–¥–∞' –∏–ª–∏ '–Ω–µ—Ç'")

    def student_game(self):
        # –ò–≥—Ä–∞ "–∫–∞–º–µ–Ω—å-–Ω–æ–∂–Ω–∏—Ü—ã-–±—É–º–∞–≥–∞" —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –≤ —Å—Ç–æ–ª–æ–≤–æ–π
        loc = self.locations["student_game"]
        print(f"\n{loc.visit()}")
        self.player.visited_locations.append("–ò–≥—Ä–∞ —Å –≥–æ–ª–æ–¥–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏")

        player_wins = 0  # –°—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥ –∏–≥—Ä–æ–∫–∞
        student_wins = 0  # –°—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

        print("\n –ò–≥—Ä–∞ '–∫–∞–º–µ–Ω—å/–Ω–æ–∂–Ω–∏—Ü—ã/–±—É–º–∞–≥–∞' (3 —Ä–∞—É–Ω–¥–∞)")

        # –ò–≥—Ä–∞–µ–º 3 —Ä–∞—É–Ω–¥–∞
        for round_num in range(1, 4):
            print(f"\n –†–ê–£–ù–î {round_num}/3")
            print(f"üèÜ –°—á–µ—Ç: –í—ã {player_wins} - {student_wins} –°—Ç—É–¥–µ–Ω—Ç—ã")

            # –¶–∏–∫–ª –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞ (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∏—á—å–µ–π)
            while True:
                player_choice = input("–í–∞—à –≤—ã–±–æ—Ä (–∫–∞–º–µ–Ω—å/–Ω–æ–∂–Ω–∏—Ü—ã/–±—É–º–∞–≥–∞): ").lower().strip()

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞
                if player_choice not in ["–∫–∞–º–µ–Ω—å", "–Ω–æ–∂–Ω–∏—Ü—ã", "–±—É–º–∞–≥–∞"]:
                    print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ '–∫–∞–º–µ–Ω—å', '–Ω–æ–∂–Ω–∏—Ü—ã' –∏–ª–∏ '–±—É–º–∞–≥–∞'")
                    continue

                # –°—Ç—É–¥–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
                student_choice = random.choice(self.student.choices)
                print(f"–°—Ç—É–¥–µ–Ω—Ç –≤—ã–±—Ä–∞–ª: {student_choice}")

                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ä–∞—É–Ω–¥–∞
                if player_choice == student_choice:
                    print("ü§ù –ù–∏—á—å—è! –ü–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–µ–º —ç—Ç–æ—Ç —Ä–∞—É–Ω–¥.")
                    continue  # –ü—Ä–∏ –Ω–∏—á—å–µ–π –ø–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–µ–º —Ä–∞—É–Ω–¥
                elif (player_choice == "–∫–∞–º–µ–Ω—å" and student_choice == "–Ω–æ–∂–Ω–∏—Ü—ã") or \
                        (player_choice == "–Ω–æ–∂–Ω–∏—Ü—ã" and student_choice == "–±—É–º–∞–≥–∞") or \
                        (player_choice == "–±—É–º–∞–≥–∞" and student_choice == "–∫–∞–º–µ–Ω—å"):
                    print("‚úÖ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ —Ä–∞—É–Ω–¥!")
                    player_wins += 1
                else:
                    print("‚ùå –°—Ç—É–¥–µ–Ω—Ç –≤—ã–∏–≥—Ä–∞–ª —Ä–∞—É–Ω–¥!")
                    student_wins += 1

                break  # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ —Ä–∞—É–Ω–¥–∞

        # –ü–æ–¥–≤–æ–¥–∏–º –∏—Ç–æ–≥–∏ 3 —Ä–∞—É–Ω–¥–æ–≤
        print("–ò–¢–û–ì–ò 3 –†–ê–£–ù–î–û–í")
        print(f"–í—ã: {player_wins}    –∏     {student_wins} :–°—Ç—É–¥–µ–Ω—Ç—ã")

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏–≥—Ä—ã
        if player_wins > student_wins:
            print(" –ü–û–ë–ï–î–ê! –í—ã –æ–±–æ–≥–Ω–∞–ª–∏ –≥–æ–ª–æ–¥–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤!")
            self.choose_food()  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É –µ–¥—ã
        elif player_wins < student_wins:
            print("–ü–û–†–ê–ñ–ï–ù–ò–ï! –ü—Ä–∏–¥–µ—Ç—Å—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏.")
            print("–í—ã –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω –∏ –≤–∞—Å –æ—Ç—á–∏—Å–ª–∏–ª–∏. üíÄ")
            self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É
        else:
            print("ü§ù –ù–ò–ß–¨–Ø! –ù—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥...")
            self.tiebreaker_round()  # –ò–≥—Ä–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥

    def choose_food(self):
        # –í—ã–±–æ—Ä –µ–¥—ã –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –≤ –∏–≥—Ä–µ —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
        print("\n –í—ã–±–µ—Ä–∏—Ç–µ –µ–¥—É, —á—Ç–æ–±—ã –Ω–∞–∫–æ–ø–∏—Ç—å —Å–∏–ª—ã :")

        # –í—ã–±–∏—Ä–∞–µ–º 6 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–ª—é–¥ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
        available_foods = random.sample(self.student.food_items, 6)

        # –í—ã–≤–æ–¥–∏–º —Å–ø–∏—Å–æ–∫ –±–ª—é–¥ —Å –Ω–æ–º–µ—Ä–∞–º–∏
        for i, food in enumerate(available_foods, 1):
            print(f"{i}. {food}")

        # –¶–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
        while True:
            try:
                choice = int(input("\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–ª—é–¥–∞: "))

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—ã–±–æ—Ä –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                if 1 <= choice <= len(available_foods):
                    selected = available_foods[choice - 1]
                    self.player.add_artifact(selected)
                    print(f"\n‚úÖ –í—ã –ø–æ–ª—É—á–∏–ª–∏: {selected}! {selected.description} ")
                    print("–í—ã –ø–æ–¥–∫—Ä–µ–ø–∏–ª–∏—Å—å –∏ –±—ã—Å—Ç—Ä–æ –≤—ã—Ö–æ–¥–∏—Ç–µ –∏–∑ —Å—Ç–æ–ª–æ–≤–æ–π.")

                    self.teacher_quest()  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∑–∞–¥–∞–Ω–∏—é –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                    break
                else:
                    print(f"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ {len(available_foods)}")
            except ValueError:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ")

    def teacher_quest(self):
        # –ó–∞–¥–∞–Ω–∏–µ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: –¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –Ω—É–∂–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
        loc = self.locations["teacher_quest"]
        print(f"\n{loc.visit()}")
        self.player.visited_locations.append("–ó–∞–¥–∞–Ω–∏–µ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞")

        print(f"\n –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ò—Ä–∏–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∞—Å:")
        print(f"'–°—Ç—É–¥–µ–Ω—Ç! –°—Ä–æ—á–Ω–æ –æ—Ç–Ω–µ—Å–∏ —ç—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –∫–∞–±–∏–Ω–µ—Ç...'")
        print("–ù–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é –ø–æ–∑–≤–æ–Ω–∏–ª–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –∏ –≤—ã –Ω–µ —Ä–∞—Å—Å–ª—ã—à–∞–ª–∏ –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞!")
        print("–ò—Ä–∏–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞ —É—à–ª–∞, –∞ –≤—ã —Å—Ç–æ–∏—Ç–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤ —Ä—É–∫–∞—Ö...")

        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã
        print(f"\n–í–æ–∑–º–æ–∂–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã: {', '.join(self.classrooms)}")
        print(f"–£ –≤–∞—Å –µ—Å—Ç—å {self.teacher_attempts} –ø–æ–ø—ã—Ç–∫–∏, —á—Ç–æ–±—ã —É–≥–∞–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!")

        attempts = self.teacher_attempts  # –ù–∞—á–∏–Ω–∞–µ–º —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫

        # –¶–∏–∫–ª —É–≥–∞–¥—ã–≤–∞–Ω–∏—è –∫–∞–±–∏–Ω–µ—Ç–∞
        while attempts > 0:
            print(f"\n –ü–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å: {attempts}")
            guess = input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ (501-506): ").strip()

            if guess == self.target_classroom:
                # –ò–≥—Ä–æ–∫ —É–≥–∞–¥–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ
                print(f"\nüéâ –£–†–ê! –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–≥–∞–¥–∞–ª–∏ –∫–∞–±–∏–Ω–µ—Ç {self.target_classroom}!")
                print("–í—ã —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —É—Å–ø–µ–≤–∞–µ—Ç–µ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω! –ü—Ä–µ–ø–æ–¥ –ø–æ—Å—Ç–∞–≤–∏–ª –≤–∞–º –∞–≤—Ç–æ–º–∞—Ç –∑–∞ –ø–æ–º–æ—â—å")
                self.exam_result(True)  # –≠–∫–∑–∞–º–µ–Ω —Å–¥–∞–Ω –≤–æ–≤—Ä–µ–º—è
                return
            else:
                # –ò–≥—Ä–æ–∫ –Ω–µ —É–≥–∞–¥–∞–ª
                attempts -= 1
                if attempts > 0:
                    print(f" –ù–µ —É–≥–∞–¥–∞–ª–∏! –≠—Ç–æ –Ω–µ –∫–∞–±–∏–Ω–µ—Ç {guess}.")

                    # –î–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É: –±–æ–ª—å—à–µ –∏–ª–∏ –º–µ–Ω—å—à–µ –Ω–æ–º–µ—Ä
                    if int(guess) < int(self.target_classroom):
                        print("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ù—É–∂–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏–º–µ–µ—Ç –ë–û–õ–¨–®–ò–ô –Ω–æ–º–µ—Ä")
                    else:
                        print("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ù—É–∂–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏–º–µ–µ—Ç –ú–ï–ù–¨–®–ò–ô –Ω–æ–º–µ—Ä")
                else:
                    # –ü–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
                    print(f"\nüíÄ –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!")
                    print(f"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –±—ã–ª: {self.target_classroom}")
                    print("–í—ã –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω, –ø–æ–∫–∞ –∏—Å–∫–∞–ª–∏ –∫–∞–±–∏–Ω–µ—Ç...")
                    self.exam_result(False)  # –û–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω
                    return

    def exam_result(self, on_time: bool):
        # –†–µ–∑—É–ª—å—Ç–∞—Ç —ç–∫–∑–∞–º–µ–Ω–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
        print("\n üíÄ–≠–∫–∑–∞–º–µ–Ω –ø–æ –º–∞—Ç–∞–Ω—É:")

        if on_time:
            # –ï—Å–ª–∏ —É—Å–ø–µ–ª–∏ –≤–æ–≤—Ä–µ–º—è
            if random.random() < 0.8:  # 80% —à–∞–Ω—Å —Å–¥–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω
                print("üéâ –í—ã —É—Å–ø–µ—à–Ω–æ —Å–¥–∞–ª–∏ —ç–∫–∑–∞–º–µ–Ω! –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!")

                # 50% —à–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                if random.random() < 0.5:
                    reward = Artifact("–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –ø—Ä–µ–ø–æ–¥–∞ - –∞–≤—Ç–æ–º–∞—Ç –ø–æ –º–∞—Ç–∞–Ω—É", "üèÜ",
                                      "–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–æ–≤–æ–ª–µ–Ω –≤–∞—à–µ–π –ø–æ–º–æ—â—å—é", 50)
                    self.player.add_artifact(reward)
                    print(f" –ó–∞ –ø–æ–º–æ—â—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–∞–ª –≤–∞–º: {reward}")
            else:
                print("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–µ —É—Å–ø–µ–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∏ –Ω–µ —Å–¥–∞–ª–∏. –í–∞—Å –æ—Ç—á–∏—Å–ª–∏–ª–∏ –∏–∑-–∑–∞ –º–∞—Ç–∞–Ω–∞.")
        else:
            # –ï—Å–ª–∏ –æ–ø–æ–∑–¥–∞–ª–∏
            print("‚è∞ –í—ã –æ–ø–æ–∑–¥–∞–ª–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω!")
        
        self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É

    def tiebreaker_round(self):
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥ –∏–≥—Ä—ã –ø—Ä–∏ –Ω–∏—á—å–µ–π –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–µ
        print("\n –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—É–Ω–¥!")

        while True:
            player_choice = input("–í–∞—à –≤—ã–±–æ—Ä (–∫–∞–º–µ–Ω—å/–Ω–æ–∂–Ω–∏—Ü—ã/–±—É–º–∞–≥–∞): ").lower().strip()

            if player_choice not in ["–∫–∞–º–µ–Ω—å", "–Ω–æ–∂–Ω–∏—Ü—ã", "–±—É–º–∞–≥–∞"]:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ '–∫–∞–º–µ–Ω—å', '–Ω–æ–∂–Ω–∏—Ü—ã' –∏–ª–∏ '–±—É–º–∞–≥–∞'")
                continue

            student_choice = random.choice(self.student.choices)
            print(f" –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±—Ä–∞–ª: {student_choice}")

            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ä–∞—É–Ω–¥–∞
            if player_choice == student_choice:
                print("ü§ù –û–ø—è—Ç—å –Ω–∏—á—å—è! –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º...")
                continue  # –ü—Ä–∏ –Ω–∏—á—å–µ–π –∏–≥—Ä–∞–µ–º —Å–Ω–æ–≤–∞
            elif (player_choice == "–∫–∞–º–µ–Ω—å" and student_choice == "–Ω–æ–∂–Ω–∏—Ü—ã") or \
                    (player_choice == "–Ω–æ–∂–Ω–∏—Ü—ã" and student_choice == "–±—É–º–∞–≥–∞") or \
                    (player_choice == "–±—É–º–∞–≥–∞" and student_choice == "–∫–∞–º–µ–Ω—å"):
                print("üèÜ –ü–û–ë–ï–î–ê! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ —Ä–µ—à–∞—é—â–∏–π —Ä–∞—É–Ω–¥!")
                self.choose_food()  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É –µ–¥—ã
            else:
                print("–ü–û–†–ê–ñ–ï–ù–ò–ï! –°—Ç—É–¥–µ–Ω—Ç—ã –≤—ã–∏–≥—Ä–∞–ª–∏ —Ä–µ—à–∞—é—â–∏–π —Ä–∞—É–Ω–¥.")
                print("‚è∞ –í–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏ –∏ –≤—ã –æ–ø–æ–∑–¥–∞–µ—Ç–µ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω.")
                self.end_game()  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É

            break

    def end_game(self):
        # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã, –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        print("\n" + "-" * 20)
        print(" –ò–ì–†–ê –ó–ê–í–ï–†–®–ï–ù–ê")
        print("-" * 20)

        # –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
        unique_locations = []
        for loc in self.player.visited_locations:
            if loc not in unique_locations:
                unique_locations.append(loc)

        # –í—ã–≤–æ–¥–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        print(f"üìç –ü–æ—Å–µ—â–µ–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏: {', '.join(unique_locations)}")
        print(f" –í–∞—à–∏ –ø—Ä–µ–¥–º–µ—Ç—ã: {self.player.get_artifact_names()}")
        print(f"‚ú® –ù–∞–π–¥–µ–Ω–æ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: {self.player.special_artifacts_found}")

        # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
        self.play_again()

    def play_again(self):
        # –°–ø—Ä–∞—à–∏–≤–∞–µ–º –∏–≥—Ä–æ–∫–∞, —Ö–æ—á–µ—Ç –ª–∏ –æ–Ω —Å—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
        while True:
            choice = input("\n –°—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞? (–¥–∞/–Ω–µ—Ç): ").lower().strip()

            if choice == "–¥–∞":
                self.reset_game()  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–≥—Ä—É
                self.start()      # –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É
                break
            elif choice == "–Ω–µ—Ç":
                print("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –£–¥–∞—á–∏ –≤ —É—á–µ–±–µ!")
                self.game_active = False  # –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É
                break
            else:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '–¥–∞' –∏–ª–∏ '–Ω–µ—Ç'")

    def reset_game(self):
        # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã
        self.player = Player()  # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
        self.student = Student()  # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
        self.target_classroom = random.choice(self.classrooms)  # –ù–æ–≤—ã–π —Ü–µ–ª–µ–≤–æ–π –∫–∞–±–∏–Ω–µ—Ç
        self.teacher_attempts = 3  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
        self.player.prepared_tickets = random.sample(list(range(1, 11)), 3)  # –ù–æ–≤—ã–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã
        self.special_in_hallway = random.randint(1, 2)  # –ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥–∏ –ø–æ—Å–µ—â–µ–Ω–∏—è –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π
        for loc in self.locations.values():
            loc.visited = False


def main():
    # –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
    print("-" * 20)
    print("–°–¢–£–î–ï–ù–ß–ï–°–ö–ê–Ø –ñ–ò–ó–ù–¨")
    print("-" * 20)
    print("–°–æ–±–µ—Ä–∏—Ç–µ –æ—Å–æ–±—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ!")

    # –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã
    while True:
        start_choice = input("\n –•–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å? (–¥–∞/–Ω–µ—Ç): ").lower().strip()

        if start_choice == "–¥–∞":
            game = AdventureGame()  # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É
            game.start()           # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É

            # –ï—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
            if not game.game_active:
                break
        elif start_choice == "–Ω–µ—Ç":
            print("\n –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –£–¥–∞—á–∏ –Ω–∞ —Å–µ—Å—Å–∏–∏!")
            break
        else:
            print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '–¥–∞' –∏–ª–∏ '–Ω–µ—Ç'")


if __name__ == "__main__":
    main()  # –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –ø—Ä—è–º–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
